<!DOCTYPE html>
<html lang="en">
  <head>
    <title>BasicLighting</title>
    <meta charset="utf-8">
    <meta name="author" content="Philip Rideout">
    <link href="../recipes/css/style.css" rel="stylesheet">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/headjs/0.99/head.load.min.js" type="text/javascript"></script>
  </head>
  <body>
    <h1>Basic Lighting</h1>
    <div class="tagline">
      Click to toggle the different lighting components.
    </div>
    <div id="checks" class="customui">
	  <input type="checkbox" id="ambient" name="radio" checked="checked" />
      <label for="ambient">
        Ambient
      </label><input type="checkbox" id="diffuse" name="radio" checked="checked" /><label for="diffuse">
        Diffuse
      </label><input type="checkbox" id="specular" name="radio" /><label for="specular">
        Specular
      </label>
    </div>
    <canvas style="width:640;height:360px">
    </canvas>
    <div id="button-bar">
    </div>
    
    <script id="solidvs" type="x-shader/x-vertex">
      attribute vec4 Position;
      attribute vec3 Normal;
      varying vec3 vNormal;
      uniform mat4 modelview;
      uniform mat4 projection;
      void main(void)
      {
          vNormal = mat3(modelview) * Normal;
          vec4 p = Position;
          gl_Position = projection * modelview * p;
      }
    </script>

    <script id="solidfs" type="x-shader/x-fragment">
      precision highp float;
      precision highp vec3;
      uniform vec4 color;
      varying vec3 vNormal;
      uniform vec4 lightPosition;
      uniform vec3 ambientMaterial;
      uniform vec4 diffuseMaterial;
      uniform vec3 specularMaterial;
      uniform mat4 modelview;
      void main()
      {
          vec3 N = normalize(vNormal);
          vec3 L = normalize((modelview * lightPosition).xyz);
          float df = max(0.0, dot(N, L));
          float sf = 0.0;
          vec3 color = ambientMaterial +
                       df * diffuseMaterial.rgb +
                       sf * specularMaterial.rgb;
          gl_FragColor = vec4(color, diffuseMaterial.a);
      }
    </script>

    <script>head.js("common.js");</script>
  </body>
</html>
