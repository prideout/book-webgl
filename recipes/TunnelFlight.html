<!DOCTYPE html>
<html lang="en">
  <head>
    <title>TunnelFlight</title>
    <meta charset="utf-8">
    <meta name="author" content="Philip Rideout">
    <link href="css/style.css" rel="stylesheet">
    <script src="lib/head.load.min.js"></script>
    <script src="common.js"></script>
    <script src="TunnelFlight.js"></script>
  </head>
  <body>
    <h1>Tunnel Flight</h1>
    <div class="tagline">
      You don't always need to call <tt>clear()</tt>
    </div>
    <div id="checks" class="customui">
      <input type="checkbox" id="finite" name="radio" checked="checked"/><label for="finite">
        Finite
      </label><input type="checkbox" id="clear" name="radio" /><label for="clear">
        Clear
      </label><input type="checkbox" id="freeze" name="radio" checked="checked"/><label for="freeze">
        Freeze
      </label>
    </div>
    <canvas style="width:640px;height:360px">
    </canvas>
    <div id="button-bar">
    </div>
    
    <script id="solidvs" type="x-shader/x-vertex">
      attribute vec4 Position;
      attribute vec3 Normal;
      varying vec3 vNormal;
      uniform mat4 modelview;
      uniform mat4 projection;
      void main(void)
      {
          vNormal = mat3(modelview) * Normal;
          vec4 p = Position;
          gl_Position = projection * modelview * p;
          gl_PointSize = 10.0;
      }
    </script>

    <script id="lit" type="x-shader/x-fragment">
      precision highp float;
      precision highp vec3;
      uniform vec4 color;
      varying vec3 vNormal;

      uniform vec4 lightPosition;
      uniform vec3 ambientMaterial;
      uniform vec4 diffuseMaterial;
      uniform mat4 modelview;
        
      void main()
      {
          vec3 N = normalize(vNormal);
          vec3 L = normalize((lightPosition).xyz);
          vec3 Eye = vec3(0, 0, 1);
          vec3 H = normalize(L + Eye);
          float df = max(0.0, dot(N, L));
          vec3 color = ambientMaterial + df*diffuseMaterial.rgb;
          gl_FragColor = vec4(color, diffuseMaterial.a);
      }
    </script>

    <script id="nonlit" type="x-shader/x-fragment">
      precision highp float;
      precision highp vec3;
      uniform vec4 color;
      void main()
      {
          gl_FragColor = color;
      }
    </script>

  </body>
</html>
