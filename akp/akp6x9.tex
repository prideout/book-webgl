%*******************************************************************************
% Master TeX file for 6x9 books
% Copyright A K Peters, Ltd.
%
% This is the main TeX file that is to be compiled.  Rename the file as needed.
%*******************************************************************************
\documentclass{book}

%*******************************************************************************
% Layout
%*******************************************************************************
\usepackage[dvips,showcrop,letterpaper]{geometry}

\geometry{
  layouthoffset=1.25in,
  layoutvoffset=1in,
  layoutwidth=6in,
  layoutheight=9in,
  width=27pc,
  height=45pc, % textheight + head + headsep = 45pc
  headsep=12pt,
  foot=24pt,
  inner=0.875in, % 7/8 in. gutter margin
  top=0.625in, % head margin
  includehead
}

%*******************************************************************************
% Style file
%*******************************************************************************
\usepackage{akpbook}

%*******************************************************************************
% Packages
%*******************************************************************************
%---BEGIN AUTHOR EDIT---
\usepackage{listings}
\usepackage{color}
\usepackage[colorlinks=true,linkcolor=black,urlcolor=blue]{hyperref}
\usepackage[usenames,dvipsnames,svgnames,table]{xcolor}
\usepackage{verbatim}
\usepackage{fancyvrb}
\usepackage{framed}
\usepackage[scaled]{beramono}
\usepackage[T1]{fontenc}
%---END AUTHOR EDIT---

%*******************************************************************************
% Declarations
%   Any custom commands, aliases, or other declarations should be added below,
%   either inline or by including an external TeX file (e.g. \include{MyMacros})
%*******************************************************************************
%---BEGIN AUTHOR EDIT---

\lstdefinelanguage{JavaScript}{
  keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
  keywordstyle=\color{blue}\bfseries,
  ndkeywords={class, export, boolean, throw, implements, import, this},
  ndkeywordstyle=\color{darkgray}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{purple}\ttfamily,
  stringstyle=\color{red}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}

\lstset{
   language=JavaScript,
   backgroundcolor=\color[rgb]{.9,.9,.8},
   extendedchars=true,
   basicstyle=\footnotesize\ttfamily,
   showstringspaces=false,
   showspaces=false,
   tabsize=2,
   breaklines=true,
   showtabs=false,
   captionpos=b
}

\newcommand{\rrecipe}[1] {\section{#1}}
\newcommand{\term}[1]{\textcolor{BrickRed}{\emph{#1}}}
\newcommand{\code}[1]{\texttt{#1}}
\newcommand{\notetoself}[1]{\textcolor{red}{#1}}

\definecolor{sidenotecolor}{rgb}{.8,.85,.9}
\definecolor{nodegreen}{rgb}{0, 0.75, 0}
\definecolor{nodeyellow}{rgb}{0.75, 0.75, 0}

\newenvironment{sidenote}{%
   \def\FrameCommand{\hspace{10pt} \vrule width 3pt \colorbox{sidenotecolor}}%
   \MakeFramed{\noindent\advance\hsize-\width \FrameRestore}}%
{\endMakeFramed}

\newcommand{\summary}[1]{\addtocontents{toc}{
    \setlength{\leftskip}{15pt} \noindent  \footnotesize
    \textcolor{Gray}{#1}\normalsize\protect\par}
}
\renewcommand{\summary}[1]{}

%---END AUTHOR EDIT---

%*******************************************************************************
% Figure folders
%   For most authors, figures will be .eps files.  These figures should be
%   contained in any number of subfolders below the root folder.  Use the
%   following syntax to point to those folders:
%
%   \graphicspath{ {folder1/} {folder2/} {folder2/subfolder1/} }
%
%   Figures can then be included in the document using:
%
%   \includegraphics[width=\textwidth](FigFileName.eps}
%
%   or similar command.
%*******************************************************************************
\graphicspath{ {../../figures/} {../figures/} {../../akp/} }

%*******************************************************************************
% Workspace
%
% Use \includeonly{chapter1, chapter2, chapter3} to limit the files tex'ed
%*******************************************************************************
%\includeonly{} % you may uncomment this line if needed

%*******************************************************************************
% Book
%*******************************************************************************
\makeindex % uncomment this line if you need to generate an index
\begin{document}

%*******************************************************************************
% Front Matter%
%   The table of contents follows which is generated by \tableofcontents.
%
%   For final production, the generated *.toc file must be renamed to toc.tex.
%   This file can be edited as needed like any other included tex file.  Make
%   sure that the \tableofcontents command remains commented-out for the final
%   version of the TOC.
%
%   Next is the preface file.  Edit the text in preface.tex.
%
%   Additional front matter sections can be added as needed such as lists of
%   symbols.
%*******************************************************************************
\frontmatter
 \pagestyle{empty}
 \include{front} % title and copyright pages

 \pagestyle{fancy}
 \renewcommand{\chaptermark}[1]{\markboth{#1}{#1}}
 \renewcommand{\sectionmark}[1]{}

 \tableofcontents % uncomment this line if you need to generate a TOC
% \include{toc} % use and edit for final version
% \include{preface}
%---BEGIN AUTHOR EDIT---

%---END AUTHOR EDIT---

%*******************************************************************************
% Parts and chapters
%   \part{Part 1} where "Part 1" is the part title
%   \include{chapter1) where "chapter1" is the filename chapter1.tex
%*******************************************************************************
\mainmatter
 \renewcommand{\chaptermark}[1]{\markboth{\thechapter. #1}{}}
 \renewcommand{\sectionmark}[1]{\markright{\thesection. #1}}
%---BEGIN AUTHOR EDIT---
\include{chapter01}
\include{chapter02}
\include{chapter03}
\include{chapter04}
\include{chapter05}
\include{chapter06}
\include{chapter07}
\include{chapter08}
\include{chapter09}
\include{chapter10}
\include{chapter11}
%---END AUTHOR EDIT---

%*******************************************************************************
% Back Matter
%   Back matter begins with the bibliography.  We strongly recommend using a
%   .bib file.  You are welcome to use another bibliography style instead of our
%   in-house style.  For final production, the generated file can be renamed to
%   bibliography.tex. This file can be edited as needed, usually to fix breaks.
%
%   The index follows.  The index is generated using \makeindex (see above).
%   Use \printindex to display the index.
%
%   For final production, the generated file can be renamed to index.tex.
%   This file can be edited as needed.  Make sure that the \makeindex and
%   \printindex commands remain commented-out for the final version of the
%   index.
%*******************************************************************************
\backmatter
 \renewcommand{\chaptermark}[1]{\markboth{#1}{#1}}

\small

\bibliographystyle{akpbib}
\bibliography{}
%\include{bibliography} % use and edit for final version



\raggedright  % fixes index problem
\printindex % uncomment to display the index during authoring
%\include{index} % use and edit for final version


% any unnumbered pages go here, typically a color insert.
 \pagestyle{plain}
 \fancyhf{}
\end{document}
